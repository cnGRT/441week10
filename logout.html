<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Logout - Grant</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- 导航栏容器 -->
    <div id="nav"></div>

    <!-- 注销页面内容 -->
    <div class="logout-container">
        <h2>Logout Page</h2>
        <button onclick="handleLogout()">Confirm Logout</button>
    </div>

    <!-- 页脚容器 -->
    <div id="footer"></div>

    <!-- JavaScript 必须放在 body 末尾 -->
    <script src="app.js"></script>
    <script>
        // 注销逻辑
        function handleLogout() {
            // 1. 清空购物车
            localStorage.removeItem('cart');
            
            // 2. 下载订单文件
            const orders = JSON.parse(localStorage.orders || '[]');
            if (orders.length > 0) {
                const blob = new Blob([JSON.stringify(orders)], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `orders_${Date.now()}.txt`;
                a.click();
            }
            
            // 3. 清除会话并跳转首页
            sessionStorage.removeItem('currentUser');
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
